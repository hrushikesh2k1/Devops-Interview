1. The first question is troubleshooting remote desktop connections to an Azure virtual machine?
The RDP connection to your Windows-based virtual machine can fail for various reasons,
leaving you unable to access your VM. The basic troubleshooting steps are like resetting
remote desktop connection. The troubleshooting steps are:
1. Reset your RDP connection - this troubleshooting step resets the RDP configuration when remote connections are disabled or Windows Firewall Rules are blocking RDP.
2. Verify network security group's rules (IPv4) to confirm if a rule in network security group is blocking traffic to or from a virtual machine. Also, verify the effective security group rules to ensure Inbound Allo NSG rule exists and is prioritized for RDP port 3389.
3. Review VM boot diagnostics - this is an optional one because not every VM has boot diagnostics enabled. This troubleshooting step may be optional.
4. Reset the NIC for the VM.
5. Check the VM resource health - this troubleshooting step verifies whether there is no known issue with the Azure platform that may impact connectivity to the VM.
6. And sixth point is reset your credentials. This troubleshooting step resets your credentials on a local administrator account when you're not sure about your prospects.
7. restart your VM. This troubleshooting step can correct any underlying issues with the VM itself.
8. redeploy your VM. This step redeploy your VM to another host within an Azure to correct any underlying issues of the platform or with the networking issues.
9. verifying routine under the network watch itself. We have the next hop capability to confirm that the route isn't preventing traffic to be rooted to or from the watcher missions. You can also check the effective routes to see if the routes are from the network interface.
10. ensure that any on-premise firewalls or firewalls on your computer are not blocking outbound TCP traffic to the Azure.
Before proceeding, it might help us to review what has changed since the last successful remote desktop connection. For example, the public IP of the VM or the cloud service containing the VM has changed, so the RDP failure could be because your DNS client cache still has the old IP address registered for the DNS.Flush your DNS client cache and try connecting. The VM IP, or try connecting directly with a new IP.
You are using a third-party application to manage your remote desktop connections instead of using a connection generated by the Azure portal, so verify your application configuration includes the TCP port for RDP.
Detailed troubleshooting steps so that more desktop lines may not be able to reach that remote desktop service on the Azure VM due to issues at the following sources:
- Remote desktop client computer
- Organization internet edge device
- Network security groups
- Windows-based Azure VM
so, how to verify a remote desktop line computer if there is an issue with this remote desktop line computer?
1. Verify that your computer can make remote desktop connections to another on-premise Windows-based computer.
2. If you cannot check the following settings on your computer:
- A local firewall setting that is blocking remote desktop traffic
- A locally installed line proxy software that is preventing remote desktop connections
- Locally installed network monitoring software that is preventing remote desktop connections
In these cases, temporarily disable the software and try to connect to the on-premise computer via remote desktop. If you can find out the connection cause, actual cause this way, work with your network administrator.
3. Source 2: Organizational internet edge device. Try connecting to the internet directly and accessing the VM. If you can create a remote desktop connection with a computer directly attached to the internet, check the organization intranet edge device.
- Internal firewall blocking HTTPS connection to the internet
- A proxy server preventing remote desktop connection
- Network monitoring software running on devices in your edge network preventing remote desktop connections
4. Source 3: Network security groups. Run the IP for verifier to confirm that rule in network security group is blocking traffic to or from a virtual machine. You can also review that virtual security groups to ensure the Inbound LONSG rule exists and it is prioritized for the orbit RDP port (double 389).
5. Source 4: Windows-based Azure VM. Check whether the RDP remote desktop Windows firewall default rule is TCP.

### 2.   How do you troubleshoot when a virtual machine is stuck in a failed state?

So, you should Update the VM objects and properties by running a re-apply command in the Azure portal. If reapply doesn't clear the VM fail state, try to redeploy the VM to a new host node. This will resolve the VM fail state issue.

### 3. The question is, "Resetting local Windows password for Azure VM offline?
If you encounter issues with the Azure guest agent not responding or failing to install after uploading a custom image, you can manually reset the Windows password. The code steps for performing a local password reset for a Windows VM in Azure when there is no access to the Azure guest agent are as follows:
1. Stop the affected VM
2. Create a snapshot for the OS disk of the VM
3. Create a copy of the OS disk from this snapshot
4. Attach and mount the copied OS disk to another Windows VM
5. Create some config files on the disk. The files will help you to reset the password
6. Unmount and detach the copied OS disk from the troubleshooting VM
7. Swap the OS disk for the affected VM

### 4. How do you troubleshoot high CPU issues on Azure Windows virtual machines?
To understand the scope of the issues, there are a few questions to ask when you troubleshoot the issue next time:
- Is there any pattern on this to the issue? For example, does the high CPU issue occur at a certain time every day, week, or month? If so, can you correlate this issue to the job report or user login?
- Did the high CPU issues start after a recent code change? Did you apply an update in the Windows or in an application?
- Did the high CPU issue start after a change in workload? Such as an increase in the number of users, a higher data influx, or a large number of reports?
- For Azure, did the high CPU issue start in any of the following conditions? Like after recent deployment or restart, when an SKU or VM type changed, or when a new extension was added, or after load balancer changes were made.
To run the performance diagnosis on the Azure portal, for the option of high CPU, set the performance analysis. When you add symptoms here, they will be added to the report which helps to share your information with Azure support. In Azure portal mode, you can collect up to 15 minutes of data for longer periods of collection, you must turn the program as an executable within the VM.
Starting with opening the Performance Insights report, the Finding tabs logs any outliers in terms of resource consumption. If there are instances of high CPU usage, the Finding tabs will categorize it as either high impact or medium impact.

There is a dedicated subtab under CPU that was used for detailed pattern analysis per core or per processor. The Top CPU Consumers tab has two separate sections. You can view per-process, per-processor statistics here. In the scenario, one hour mo- one hour. Your cores run at 100%, which other cores run at expected levels. The scenarios are more complex because the average CPU on this server appears to run as expected. For the processes that are pinned on cores that have high usage will be slower than expected. You can see even basically see the highest CPU usage. Top long-running CPU consumers. 

### 5. Question is, how do you troubleshoot the issue when Windows shows a blue screen error when booting an Azure VM?
when you check the boot screenshot with Boot Diagnostics, you see one of the following error messages in the blue screen:
- Your PC ran into a problem and needs to restart.
The cause is there might be many reasons when you experience a stop error. The most common causes are the following issues:
1. Problem within a driver
2. Corrupted system files or memory
3. An application accessing a forbidden sector of the memory
the solution for this is to locate the dump file and submit a support ticket.
1. Attach the OS disk to the recovery VM.
2. Create a snapshot of the virtual hard disk of the affected VM and create a backup.
3. Create a OS disk. Copy of the OS disk and attach this disk to the recovery VM.
4. Use RDP to connect to it. Or use remote to the recovery VM.
5. If the OS disk of the affected VM is encrypted, turn on the encryption before you go to find the dump.
6. On recovery VM go to Windows folder on attached OS disk.
7. Locate the memory.dmp file and then submit the support ticket and attach the dump file.

### 6. 
